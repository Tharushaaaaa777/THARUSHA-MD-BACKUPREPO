const config = require('../config');
const { cmd, commands } = require('../command');
const { runtime } = require('../lib/functions');
const axios = require('axios');
const pakaya = "`"

cmd({
    pattern: "menu",
    desc: "Show interactive menu system",
    category: "menu",
    react: "📂",
    filename: __filename
}, async (conn, mek, m, { from, reply, pushname }) => {
    try {
        // Define pushname with fallback
        //const pushname = m.pushName || 'User';

        // Menu caption with pushname
        const menuCaption = `👋 *🅷🅴🅻🅻🅾 ${pushname} 𝘸𝘦𝘭𝘤𝘰𝘮𝘦 𝘵𝘰 ᴛʜᴀʀᴜꜱʜᴀ-ᴍᴅ 😗*

*┏━━━━━━━━━━━━━━━━━━━━━┓*
*┃ 👾 ${pakaya}ʙᴏᴛ :${pakaya} ᴛʜᴀʀᴜꜱʜᴀ ꜱᴀɴᴅɪᴘᴀ* 
*┃ 👤 ${pakaya}ᴏᴡɴᴇʀ :${pakaya} ᴛʜᴀʀᴜꜱʜᴀ ꜱᴀɴᴅɪᴘᴀ* 
*┃ 🔰 ${pakaya}ᴍᴏᴅᴇ :${pakaya} ${config.MODE}* 
*┃ 👤 ${pakaya}ᴠᴇʀᴛɪᴏɴ :${pakaya} 1.0.0 ʙᴇᴛᴀ*
*┗━━━━━━━━━━━━━━━━━━━━━┛*

*🔢 ${pakaya}ʀᴇᴘʟʏ ᴛʜᴇ ɴᴜᴍʙᴇʀ ʙᴇʟᴏᴡ,${pakaya}*

*╭─「 ${pakaya}ᴍᴇɴᴜ ᴘᴀᴛᴛᴇʀɴꜱ${pakaya} 」*
*│► 1 ➽  ᴅᴏᴡɴʟᴏᴀᴅ ᴍᴇɴᴜ*
*│► 2 ➽ ɢʀᴏᴜᴘ ᴍᴇɴᴜ* 
*│► 3 ➽ ꜰᴜɴ ᴍᴇɴᴜ*
*│► 4 ➽ ᴏᴡɴᴇʀ ᴍᴇɴᴜ*
*│► 5 ➽ ᴀɪ ᴍᴇɴᴜ*
*│► 6 ➽ ᴀɴɪᴍᴀ ᴍᴇɴᴜ*
*│► 7 ➽ ᴄᴏɴᴠᴇʀᴛ ᴍᴇɴᴜ*
*│► 8 ➽ ᴏᴛʜᴇʀ ᴍᴇɴᴜ*
*│► 9 ➽ ʀᴇᴀᴄᴛɪᴏɴ ᴍᴇɴᴜ*
*│► 10 ➽ ᴍᴀɪɴ ᴍᴇɴᴜ*
*│► 11 ➽ ꜱᴇᴛᴛɪɴɢ ᴍᴇɴᴜ*
*╰──────────●●►*

*${pakaya}「 🍄 」「 ꜰᴏʟʟᴏᴡ ᴜꜱ 」 :${pakaya}* https://whatsapp.com/channel/0029Vb9LTRHInlqISdCfln45

*${pakaya}「 👥 」「 ᴊᴏɪɴ ᴜꜱ 」 :${pakaya}* https://chat.whatsapp.com/IuCk1MbqhgO6OMklCR464s


*${pakaya}♯ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰 〽️Ｄ${pakaya}*`;

        // Context info
        /*const contextInfo = {
            mentionedJid: [m.sender],
            forwardingScore: 999,
            isForwarded: true
        };*/

        // Send menu image function
        const sendMenuImage = async () => {
            try {
                return await conn.sendMessage(
                    from,
                    {
                        image: { url: config.MENU_IMAGE_URL },
                        caption: menuCaption,
                        contextInfo: {
            forwardingScore: 0,
            isForwarded: false,
            externalAdReply: {
                title: `𝐓𝐇𝐀𝐑𝐔𝐒𝐇𝐀-𝐌𝐃`,
                body: `ᴛʜᴀʀᴜꜱʜᴀ ꜱᴀɴᴅɪᴘᴀ 👨‍💻`,
                thumbnailUrl: config.MENU_IMAGE_URL,  // Your logo URL
                mediaType: 1,
                renderLargerThumbnail: false
            }
        }
                    },
                    { quoted: mek }
                );
            } catch (e) {
                console.log('Image send failed, falling back to text');
                return await conn.sendMessage(
                    from,
                    {
                        text: menuCaption,
                        contextInfo: contextInfo
                    },
                    { quoted: mek }
                );
            }
        };

        // Send menu with timeout handling (audio part removed)
        let sentMsg;
        try {
            sentMsg = await Promise.race([
                sendMenuImage(),
                new Promise((_, reject) => setTimeout(() => reject(new Error('Image send timeout')), 10000))
            ]);
        } catch (e) {
            console.log('Menu send error:', e);
            if (!sentMsg) {
                sentMsg = await conn.sendMessage(
                    from,
                    { text: menuCaption/*, contextInfo: contextInfo */},
                    { quoted: mek }
                );
            }
        }

        const messageID = sentMsg.key.id;

        // Menu data
        const menuData = {
            '1': {
                title: "📥 *Download Menu* 📥",
                content: `📥 *T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ D̶O̶W̶N̶L̶O̶A̶D̶ C̶O̶M̶M̶N̶A̶D̶S̶ 📥*
                
*╭───────────────────●●►*
*│ • ꜰᴀᴄᴇʙᴏᴏᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴇᴅɪᴀꜰɪʀᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛɪᴋᴛᴏᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛᴡɪᴛᴛᴇʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ɪɴꜱᴛᴀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴀᴘᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɪᴍɢ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛᴛ2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘɪɴꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ᴀᴘᴋ2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜰʙ2*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘɪɴᴛᴇʀᴇꜱᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴘᴏᴛɪꜰʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴏɴɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴏɴɢᴅʟꜰᴀꜱᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴠɪᴅᴇᴏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴠɪᴅᴇᴏᴅʟꜰᴀꜱᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɢᴅʀɪᴠᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱꜱᴡᴇʙ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛɪᴋꜱ*
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 20

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '2': {
                title: "👥 *Group Menu* 👥",
                content:`👥 *T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ G̶R̶O̶U̶P̶ C̶O̶M̶M̶N̶A̶D̶S̶ 👥*
                
*╭───────────────────●●►*
*│ • ɢʀᴏᴜᴘʟɪɴᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴋɪᴄᴋᴀʟʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴋɪᴄᴋᴀʟʟ2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴋɪᴄᴋᴀʟʟ3* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴀᴅᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ʀᴇᴍᴏᴠᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴋɪᴄᴋ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘʀᴏᴍᴏᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴇᴍᴏᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ᴅɪꜱᴍɪꜱꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇᴠᴏᴋᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴇᴛɢᴏᴏᴅʙʏᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴇᴛᴡᴇʟᴄᴏᴍᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴇʟᴇᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɢᴇᴛᴘɪᴄ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɢɪɴꜰᴏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅɪꜱᴀᴘᴘᴇᴀʀ ᴏɴ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅɪꜱᴀᴘᴘᴇᴀʀ ᴏꜰꜰ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅɪꜱᴀᴘᴘᴇᴀʀ 7ᴅ,24ʜ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀʟʟʀᴇQ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜᴘᴅᴀᴛᴇɢɴᴀᴍᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜᴘᴅᴀᴛᴇɢᴅᴇꜱᴄ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴊᴏɪɴʀᴇQᴜᴇꜱᴛ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴇɴᴅᴅᴍ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴜᴛᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜɴᴍᴜᴛᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʟᴏᴄᴋɢᴄ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɪɴᴠɪᴛᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛᴀɢ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜɪᴅᴇᴛᴀɢ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛᴀɢᴀʟʟ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛᴀɢᴀᴅᴍɪɴꜱ*
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 32

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '3': {
                title: "😄 *Fun Menu* 😄",
                content: `😂 *T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ F̶U̶N̶ C̶O̶M̶M̶N̶A̶D̶S̶ 😂*
                
*╭───────────────────●●►*
*│ • ꜱʜᴀᴘᴀʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴀᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɪɴꜱᴜʟᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜᴀᴄᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ꜱʜɪᴘ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴄʜᴀʀᴀᴄᴛᴇʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘɪᴄᴋᴜᴘ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴊᴏᴋᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜʀᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ʜᴘʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɢᴇʀ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱʜʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴋɪꜱꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴏɴ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄᴜɴꜰᴜᴢᴇᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴇᴛᴘᴘ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜᴀɴᴅ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜᴏʟᴅ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜᴜɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜɪꜰɪ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘᴏᴋᴇ*
*╰───────────────────●●►*


*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 21

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '4': {
                title: "👑 *Owner Menu* 👑",
                content: `*👤T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ O̶W̶N̶E̶R̶ C̶O̶M̶M̶N̶A̶D̶S̶ 👤*
                
*╭───────────────────●●►*
*│ • ᴏᴡɴᴇʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴇɴᴜ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴇɴᴜ2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴠᴠ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ʟɪꜱᴛᴄᴍᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴀʟʟᴍᴇɴᴜ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇᴘᴏ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʙʟᴏᴄᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜɴʙʟᴏᴄᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ꜰᴜʟʟᴘᴘ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴇᴛᴘᴘ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇꜱᴛᴀʀᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱʜᴜᴛᴅᴏᴡɴ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜᴘᴅᴀᴛᴇᴄᴍᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀʟɪᴠᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘɪɴɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɢᴊɪᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴊɪᴅ*
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 32

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '5': {
                title: "🤖 *AI Menu* 🤖",
                content: `🧠 *T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ A̶I̶ C̶O̶M̶M̶N̶A̶D̶S̶ 🧠*
                
*╭───────────────────●●►*
*│ • ᴀɪ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɢᴘᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴇᴇᴘꜱᴇᴇᴋ* 
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 3

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '6': {
                title: "🎎 *Anime Menu* 🎎",
                content: `😮‍💨 *T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ A̶N̶I̶M̶A̶ C̶O̶M̶M̶N̶A̶D̶S̶ 😮‍💨*
                
*╭───────────────────●●►*
*│ • ꜰᴀᴄᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛʀᴜᴛʜ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴀʀᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴏɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴀᴡᴏᴏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ɢᴀʀʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴡᴀɪꜰᴜ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɴᴇᴋᴏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴇɢᴜᴍɪɴ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ᴍᴀɪᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʟᴏʟɪ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀɢɪʀʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀɢɪʀʟ 1* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀɢɪʀʟ 2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀɢɪʀʟ 3* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀɢɪʀʟ 4* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀ ɢɪʀʟ 5* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀ 2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀ 3* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀ 4* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀ 5* 
*╰───────────────────●●►*
*╭───────────────────●●►*
*│ • ᴀɴɪᴍᴀɴᴇᴡꜱ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜰᴏxɢɪʀʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɴᴀʀᴜᴛᴏ*
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 32

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '7': {
                title: "🔄 *Convert Menu* 🔄",
                content: `*🫟 T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ C̶O̶N̶V̶E̶R̶T̶ C̶O̶M̶M̶N̶A̶D̶S̶ 🫟*
                
*╭───────────────────●●►*
*│ • ꜱᴛɪᴄᴋᴇʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴇᴍᴏᴊɪᴍɪx* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜰᴀɴᴄʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛᴀᴋᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴛᴏᴍᴘ3* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴛᴛꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴛʀᴛ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʙᴀꜱᴇ64* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜɴʙᴀꜱᴇ64* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ᴛɪɴʏᴜʀʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜʀʟᴅᴇᴄᴏᴅᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜʀʟᴇɴᴄᴏᴅᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴜʀʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇᴘᴇᴀᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀꜱᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇᴀᴅᴍᴏʀᴇ* 
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 16

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '8': {
                title: "📌 *Other Menu* 📌",
                content: `*🫟 T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ O̶T̶H̶E̶R̶ C̶O̶M̶M̶N̶A̶D̶S̶ 🫟*
                
*╭───────────────────●●►*
*│ • ᴛɪᴍᴇɴᴏᴡ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴀᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄᴏᴜɴᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄᴀʟᴄᴜʟᴀᴛᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴄᴏᴜɴᴛx* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ꜰʟɪᴘ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄᴏɪɴꜰʟɪᴘ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴄᴏʟᴏʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴏʟʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ꜰᴀᴄᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄᴘᴘ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴡ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘᴀɪʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʟᴏɢᴏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ɴᴇᴡꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱʀᴇᴘᴏ* 
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 16

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '9': {
                title: "💞 *Reactions Menu* 💞",
                content: `*🔰 T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ R̶E̶A̶C̶T̶I̶O̶N̶ C̶O̶M̶M̶N̶A̶D̶S̶ 🔰*
                
*╭───────────────────●●►*
*│ • ʙᴜʟʟʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄᴜᴅᴅʟᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴄʀʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜᴜɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴀᴡᴏᴏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴋɪꜱꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʟɪᴄᴋ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘᴀᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴍᴜɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ʙᴏɴᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʏᴇᴇᴛ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʙʟᴜꜱʜ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴍɪʟʟ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴡᴀᴠᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜɪɢʜꜰɪᴠᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʜᴀɴᴅʜᴏʟᴅ* 
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 16

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
              '11': {
                title: "⚙️ *Setting Menu* ⚙️",
                content: `⚙️ *T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ S̶E̶T̶T̶I̶N̶G̶ C̶O̶M̶M̶N̶A̶D̶S̶ ⚙️*
                
*╭───────────────────●●►*
*│ •ᴀᴅᴍɪɴᴇᴠᴇɴᴛꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •ᴡᴇʟᴄᴏᴍᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •ꜱᴇᴛᴘʀᴇꜰɪx* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •ᴍᴏᴅᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏᴛʏᴘɪɴɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴇɴᴛɪᴏɴʀᴇᴘʟʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀʟᴡᴀʏꜱᴏɴʟɪɴᴇ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏʀᴇᴄᴏʀᴅɪɴɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏꜱᴛᴀᴛᴜꜱꜱᴇᴇɴ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ᴀᴜᴛᴏʟɪᴋᴇꜱᴛᴀᴛᴜꜱ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴛᴀᴛᴜꜱʀᴇᴘʟʏ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏʀᴇᴀᴅᴍᴇꜱꜱᴀɢᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏᴠᴏɪᴄᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏꜱᴛɪᴄᴋᴇʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏʀᴇᴘʟʏ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴᴛɪʙᴀᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀᴜᴛᴏʀᴇᴀᴄᴛ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴᴛɪʟɪɴᴋ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀɴᴛɪʟɪɴᴋᴋɪᴄᴋ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴅᴇʟᴇᴛᴇʟɪɴᴋ*
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 20

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            },
            '10': {
                title: "🏠 *Main Menu* 🏠",
                content: `*📁 T̶H̶A̶R̶U̶S̶H̶A̶ M̶D̶ M̶A̶I̶N̶ C̶O̶M̶M̶N̶A̶D̶S̶ 📁*
                
*╭───────────────────●●►*
*│ • ᴘɪɴɢ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴘɪɴɢ2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ꜱᴘᴇᴇᴅ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴀʟɪᴠᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ʀᴜɴᴛɪᴍᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ •  ᴜᴘᴛɪᴍᴇ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇᴘᴏ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴏᴡɴᴇʀ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ᴍᴇɴᴜ* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│  • ᴍᴇɴᴜ2* 
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʀᴇꜱᴛᴀʀᴛ*
*╰───────────────────●●►*

*╭───────────────────●●►*
*│ • ʟɪꜱᴛᴄᴍᴅ* 
*╰───────────────────●●►*

*♯ T̶o̶t̶l̶e̶ c̶o̶m̶m̶n̶a̶d̶s̶ :-* 20

> *㋛ 𝙿𝙾𝚆𝙴𝚁𝙳 𝙱𝚈 𝚃𝙷𝙰𝚁𝚄𝚂𝙷𝙰  〽️Ｄ*`,
                image: true
            }
        };

        // Message handler
        const handler = async (msgData) => {
            try {
                const receivedMsg = msgData.messages[0];
                if (!receivedMsg?.message || !receivedMsg.key?.remoteJid) return;

                const isReplyToMenu = receivedMsg.message.extendedTextMessage?.contextInfo?.stanzaId === messageID;

                if (isReplyToMenu) {
                    const receivedText = receivedMsg.message.conversation ||
                                      receivedMsg.message.extendedTextMessage?.text;
                    const senderID = receivedMsg.key.remoteJid;

                    if (menuData[receivedText]) {
                        const selectedMenu = menuData[receivedText];

                        try {
                            if (selectedMenu.image) {
                                await conn.sendMessage(
                                    senderID,
                                    {
                                        image: { url: config.MENU_IMAGE_URL },
                                        caption: selectedMenu.content/*,
                                        contextInfo: contextInfo*/
                                    },
                                    { quoted: receivedMsg }
                                );
                            } else {
                                await conn.sendMessage(
                                    senderID,
                                    { text: selectedMenu.content/*, contextInfo: contextInfo*/ },
                                    { quoted: receivedMsg }
                                );
                            }

                            await conn.sendMessage(senderID, {
                                react: { text: '✅', key: receivedMsg.key }
                            });

                        } catch (e) {
                            console.log('Menu reply error:', e);
                            await conn.sendMessage(
                                senderID,
                                { text: selectedMenu.content/*, contextInfo: contextInfo */},
                                { quoted: receivedMsg }
                            );
                        }
                    } else {
                        await conn.sendMessage(
                            senderID,
                            {
                                text: `❌ *Invalid Option!* ❌\n\nPlease reply with a number between 1-10 to select a menu.\n\n*Example:* Reply with "1" for Download Menu\n\n> ${config.DESCRIPTION}`/*,
                                contextInfo: contextInfo*/
                            },
                            { quoted: receivedMsg }
                        );
                    }
                }
            } catch (e) {
                console.log('Handler error:', e);
            }
        };

        // Add listener
        conn.ev.on("messages.upsert", handler);

        // Remove listener after 5 minutes
        setTimeout(() => {
            conn.ev.off("messages.upsert", handler);
        }, 300000);

    } catch (e) {
        console.error('Menu Error:', e);
        try {
            await conn.sendMessage(
                from,
                { text: `❌ Menu system is currently busy. Please try again later.\n\n> ${config.DESCRIPTION}` },
                { quoted: mek }
            );
        } catch (finalError) {
            console.log('Final error handling failed:', finalError);
        }
    }
});
